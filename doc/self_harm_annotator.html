<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module self_harm_annotator</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>self_harm_annotator</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/Users/Andre/workspace/PycharmProjects/self_harm_annotator/self_harm_annotator.py">/Users/Andre/workspace/PycharmProjects/self_harm_annotator/self_harm_annotator.py</a></font></td></tr></table>
    <p><tt>Self-Harm&nbsp;annotator<br>
&nbsp;<br>
This&nbsp;annotator&nbsp;marks&nbsp;up&nbsp;mentions&nbsp;of&nbsp;self-harm&nbsp;in&nbsp;clinical&nbsp;texts.<br>
The&nbsp;algorithm&nbsp;determines&nbsp;whether&nbsp;a&nbsp;mention&nbsp;is&nbsp;negated&nbsp;or&nbsp;not,<br>
whether&nbsp;it&nbsp;is&nbsp;current&nbsp;or&nbsp;historical&nbsp;and&nbsp;whether&nbsp;it&nbsp;is&nbsp;relevant&nbsp;or&nbsp;not,&nbsp;as&nbsp;<br>
defined&nbsp;by&nbsp;the&nbsp;parameters&nbsp;of&nbsp;the&nbsp;associated&nbsp;study&nbsp;(reference&nbsp;to&nbsp;be&nbsp;provided).<br>
The&nbsp;type&nbsp;of&nbsp;self-harm&nbsp;is&nbsp;also&nbsp;annotated&nbsp;in&nbsp;a&nbsp;normalised&nbsp;form.<br>
Output&nbsp;is&nbsp;in&nbsp;the&nbsp;XML&nbsp;stand-off&nbsp;annotation&nbsp;format&nbsp;that&nbsp;is&nbsp;used<br>
by&nbsp;the&nbsp;eHOST&nbsp;annotation&nbsp;tool&nbsp;(see&nbsp;https://code.google.com/archive/p/ehost/).<br>
&nbsp;<br>
Tag:&nbsp;Self-harm<br>
Attributes&nbsp;and&nbsp;values:<br>
&nbsp;&nbsp;&nbsp;&nbsp;sh_type&nbsp;-&nbsp;HAIR-PULLING,&nbsp;OVERDOSE,&nbsp;BITING,&nbsp;BURNING,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CUTTING,&nbsp;SELF-HARM,&nbsp;HITTING,&nbsp;STABBING,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STRANGULATION,&nbsp;TRAUMA,&nbsp;SKIN-PICKING,&nbsp;SUICIDALITY<br>
&nbsp;&nbsp;&nbsp;&nbsp;polarity&nbsp;-&nbsp;NEGATIVE&nbsp;or&nbsp;POSITIVE<br>
&nbsp;&nbsp;&nbsp;&nbsp;status&nbsp;-&nbsp;RELEVANT&nbsp;or&nbsp;NON-RELEVANT<br>
&nbsp;&nbsp;&nbsp;&nbsp;temporality&nbsp;-&nbsp;CURRENT&nbsp;or&nbsp;HISTORICAL</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="xml.etree.ElementTree.html">xml.etree.ElementTree</a><br>
<a href="argparse.html">argparse</a><br>
</td><td width="25%" valign=top><a href="os.html">os</a><br>
<a href="re.html">re</a><br>
</td><td width="25%" valign=top><a href="spacy.html">spacy</a><br>
<a href="sys.html">sys</a><br>
</td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="builtins.html#object">builtins.object</a>
</font></dt><dd>
<dl>
<dt><font face="helvetica, arial"><a href="self_harm_annotator.html#DateTokenAnnotator">DateTokenAnnotator</a>
</font></dt><dt><font face="helvetica, arial"><a href="self_harm_annotator.html#LemmaCorrector">LemmaCorrector</a>
</font></dt><dt><font face="helvetica, arial"><a href="self_harm_annotator.html#SelfHarmAnnotator">SelfHarmAnnotator</a>
</font></dt></dl>
</dd>
</dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="DateTokenAnnotator">class <strong>DateTokenAnnotator</strong></a>(<a href="builtins.html#object">builtins.object</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>Date&nbsp;Token&nbsp;Annotator<br>
&nbsp;<br>
Annotate&nbsp;specific&nbsp;and&nbsp;easily&nbsp;matched&nbsp;date&nbsp;patterns.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="DateTokenAnnotator-__call__"><strong>__call__</strong></a>(self, doc)</dt><dd><tt>Call&nbsp;self&nbsp;as&nbsp;a&nbsp;function.</tt></dd></dl>

<dl><dt><a name="DateTokenAnnotator-__init__"><strong>__init__</strong></a>(self)</dt><dd><tt>Create&nbsp;a&nbsp;new&nbsp;<a href="#DateTokenAnnotator">DateTokenAnnotator</a>&nbsp;instance.</tt></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table> <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="LemmaCorrector">class <strong>LemmaCorrector</strong></a>(<a href="builtins.html#object">builtins.object</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>Lemma&nbsp;Corrector<br>
&nbsp;<br>
Replace&nbsp;spaCy's&nbsp;default&nbsp;lemma&nbsp;for&nbsp;relevant&nbsp;pronouns&nbsp;and&nbsp;other&nbsp;words.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="LemmaCorrector-__call__"><strong>__call__</strong></a>(self, doc)</dt><dd><tt>Call&nbsp;self&nbsp;as&nbsp;a&nbsp;function.</tt></dd></dl>

<dl><dt><a name="LemmaCorrector-__init__"><strong>__init__</strong></a>(self)</dt><dd><tt>Create&nbsp;a&nbsp;new&nbsp;<a href="#LemmaCorrector">LemmaCorrector</a>&nbsp;instance.</tt></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table> <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="SelfHarmAnnotator">class <strong>SelfHarmAnnotator</strong></a>(<a href="builtins.html#object">builtins.object</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>Self-Harm&nbsp;annotator<br>
&nbsp;<br>
Annotate&nbsp;mentions&nbsp;of&nbsp;self-harm&nbsp;in&nbsp;clinical&nbsp;texts.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="SelfHarmAnnotator-__init__"><strong>__init__</strong></a>(self, verbose=False)</dt><dd><tt>Create&nbsp;a&nbsp;new&nbsp;<a href="#SelfHarmAnnotator">SelfHarmAnnotator</a>&nbsp;instance.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;verbose:&nbsp;bool;&nbsp;print&nbsp;all&nbsp;messages.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-annotate_file"><strong>annotate_file</strong></a>(self, path)</dt><dd><tt>Annotate&nbsp;the&nbsp;contents&nbsp;of&nbsp;a&nbsp;text&nbsp;file.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;path:&nbsp;str;&nbsp;the&nbsp;path&nbsp;to&nbsp;a&nbsp;text&nbsp;file&nbsp;to&nbsp;annotate.<br>
&nbsp;<br>
Return:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;doc:&nbsp;spacy&nbsp;Doc;&nbsp;the&nbsp;annotated&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a>.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-annotate_text"><strong>annotate_text</strong></a>(self, text)</dt><dd><tt>Annotate&nbsp;a&nbsp;text&nbsp;string.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;text:&nbsp;str;&nbsp;the&nbsp;text&nbsp;to&nbsp;annotate.<br>
&nbsp;<br>
Return:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;doc:&nbsp;spaCy&nbsp;Doc;&nbsp;the&nbsp;annotated&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a>.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-build_ehost_output"><strong>build_ehost_output</strong></a>(self, doc)</dt><dd><tt>Construct&nbsp;a&nbsp;dictionary&nbsp;representation&nbsp;of&nbsp;all&nbsp;annotations.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;doc:&nbsp;spacy&nbsp;Doc;&nbsp;the&nbsp;processed&nbsp;spaCy&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a>.<br>
&nbsp;<br>
Return:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;mentions:&nbsp;dict;&nbsp;a&nbsp;dictionary&nbsp;containing&nbsp;all&nbsp;annotations&nbsp;ready&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output&nbsp;in&nbsp;eHOST&nbsp;XML&nbsp;format.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-calculate_sh_mention_attributes"><strong>calculate_sh_mention_attributes</strong></a>(self, doc, verbose=False)</dt><dd><tt>Using&nbsp;previously&nbsp;added&nbsp;annotations,&nbsp;calculate&nbsp;the&nbsp;attribute&nbsp;values&nbsp;for&nbsp;<br>
all&nbsp;detected&nbsp;mentions,&nbsp;and&nbsp;determine&nbsp;whether&nbsp;the&nbsp;document&nbsp;has&nbsp;a&nbsp;history<br>
section.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;doc:&nbsp;spaCy&nbsp;Doc;&nbsp;the&nbsp;current&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a>.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;verbose:&nbsp;bool;&nbsp;print&nbsp;all&nbsp;messages.<br>
&nbsp;<br>
Return:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;has_history_section:&nbsp;bool;&nbsp;True&nbsp;if&nbsp;a&nbsp;history&nbsp;section&nbsp;was&nbsp;detected<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;document,&nbsp;else&nbsp;False.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-get_text"><strong>get_text</strong></a>(self)</dt><dd><tt>Return&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;current&nbsp;annotator&nbsp;instance.<br>
&nbsp;<br>
Return:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;text:&nbsp;str;&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;document&nbsp;being&nbsp;processed.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-has_hedging_ancestor"><strong>has_hedging_ancestor</strong></a>(self, curr_token, verbose=True)</dt><dd><tt>Search&nbsp;the&nbsp;dependency&nbsp;tree&nbsp;for&nbsp;an&nbsp;ancestor&nbsp;of&nbsp;the&nbsp;current&nbsp;node&nbsp;that&nbsp;is<br>
a&nbsp;marker&nbsp;of&nbsp;hedging.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;curr_token:&nbsp;spaCy&nbsp;Token;&nbsp;the&nbsp;token&nbsp;to&nbsp;start&nbsp;searching&nbsp;from.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;verbose:&nbsp;bool;&nbsp;print&nbsp;all&nbsp;messages.<br>
&nbsp;<br>
Return:&nbsp;bool;&nbsp;True&nbsp;if&nbsp;hedging&nbsp;marker&nbsp;found,&nbsp;else&nbsp;False.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-has_hedging_dependent"><strong>has_hedging_dependent</strong></a>(self, curr_token, verbose=True)</dt><dd><tt>Search&nbsp;the&nbsp;dependency&nbsp;tree&nbsp;for&nbsp;an&nbsp;dependent&nbsp;of&nbsp;the&nbsp;current&nbsp;node&nbsp;that&nbsp;is<br>
a&nbsp;marker&nbsp;of&nbsp;hedging.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;curr_token:&nbsp;spaCy&nbsp;Token;&nbsp;the&nbsp;token&nbsp;to&nbsp;start&nbsp;searching&nbsp;from.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;verbose:&nbsp;bool;&nbsp;print&nbsp;all&nbsp;messages.<br>
&nbsp;<br>
Return:&nbsp;bool;&nbsp;True&nbsp;if&nbsp;hedging&nbsp;marker&nbsp;found,&nbsp;else&nbsp;False.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-has_hedging_noun_previous"><strong>has_hedging_noun_previous</strong></a>(self, doc, i, verbose=False)</dt><dd><tt>Search&nbsp;for&nbsp;a&nbsp;hedging&nbsp;noun&nbsp;in&nbsp;the&nbsp;preceding&nbsp;tokens&nbsp;within&nbsp;the&nbsp;current<br>
sentence.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;doc:&nbsp;spaCy&nbsp;Doc;&nbsp;the&nbsp;current&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a>.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;i:&nbsp;int;&nbsp;the&nbsp;token&nbsp;index&nbsp;in&nbsp;the&nbsp;current&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a>&nbsp;to&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;search&nbsp;from.<br>
&nbsp;<br>
Return:&nbsp;bool;&nbsp;True&nbsp;if&nbsp;hedging&nbsp;noun&nbsp;found,&nbsp;else&nbsp;False.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-has_historical_ancestor"><strong>has_historical_ancestor</strong></a>(self, curr_token, verbose=False)</dt><dd><tt>Search&nbsp;the&nbsp;dependency&nbsp;tree&nbsp;for&nbsp;an&nbsp;ancestor&nbsp;of&nbsp;the&nbsp;current&nbsp;node&nbsp;that&nbsp;is<br>
a&nbsp;marker&nbsp;of&nbsp;historical&nbsp;temporality.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;curr_token:&nbsp;spaCy&nbsp;Token;&nbsp;the&nbsp;token&nbsp;to&nbsp;start&nbsp;searching&nbsp;from.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;verbose:&nbsp;bool;&nbsp;print&nbsp;all&nbsp;messages.<br>
&nbsp;<br>
Return:&nbsp;bool;&nbsp;True&nbsp;if&nbsp;historical&nbsp;marker&nbsp;found,&nbsp;else&nbsp;False.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-has_historical_dependent"><strong>has_historical_dependent</strong></a>(self, curr_token, verbose=False)</dt><dd><tt>Search&nbsp;the&nbsp;dependency&nbsp;tree&nbsp;for&nbsp;an&nbsp;dependent&nbsp;of&nbsp;the&nbsp;current&nbsp;node&nbsp;that&nbsp;is<br>
a&nbsp;marker&nbsp;of&nbsp;historical&nbsp;temporality.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;curr_token:&nbsp;spaCy&nbsp;Token;&nbsp;the&nbsp;token&nbsp;to&nbsp;start&nbsp;searching&nbsp;from.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;verbose:&nbsp;bool;&nbsp;print&nbsp;all&nbsp;messages.<br>
&nbsp;<br>
Return:&nbsp;bool;&nbsp;True&nbsp;if&nbsp;historical&nbsp;marker&nbsp;found,&nbsp;else&nbsp;False.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-has_negation_ancestor"><strong>has_negation_ancestor</strong></a>(self, curr_token, verbose=False)</dt><dd><tt>Search&nbsp;the&nbsp;dependency&nbsp;tree&nbsp;for&nbsp;a&nbsp;negation&nbsp;marker.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;curr_token:&nbsp;spaCy&nbsp;Token;&nbsp;the&nbsp;token&nbsp;to&nbsp;start&nbsp;searching&nbsp;from.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;verbose:&nbsp;bool;&nbsp;print&nbsp;all&nbsp;messages.<br>
&nbsp;<br>
Return:&nbsp;bool;&nbsp;True&nbsp;if&nbsp;negation&nbsp;found,&nbsp;else&nbsp;False.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-has_past_tense_governor"><strong>has_past_tense_governor</strong></a>(self, curr_token)</dt><dd><tt>Check&nbsp;if&nbsp;the&nbsp;current&nbsp;token's&nbsp;governor&nbsp;is&nbsp;a&nbsp;past&nbsp;tense&nbsp;verb.<br>
WARNING:&nbsp;This&nbsp;had&nbsp;a&nbsp;disastrous&nbsp;effect&nbsp;on&nbsp;results;&nbsp;not&nbsp;in&nbsp;use.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;curr_token:&nbsp;spacy&nbsp;Token;&nbsp;the&nbsp;current&nbsp;token.<br>
&nbsp;<br>
Return:&nbsp;bool;&nbsp;True&nbsp;if&nbsp;past&nbsp;tense&nbsp;governor&nbsp;found,&nbsp;else&nbsp;False.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-has_propatt_ancestor"><strong>has_propatt_ancestor</strong></a>(self, curr_token)</dt><dd><tt>Search&nbsp;the&nbsp;dependency&nbsp;tree&nbsp;for&nbsp;a&nbsp;propositional&nbsp;attitude&nbsp;ancestor&nbsp;of&nbsp;the<br>
current&nbsp;token.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;curr_token:&nbsp;spaCy&nbsp;Token;&nbsp;the&nbsp;token&nbsp;to&nbsp;start&nbsp;searching&nbsp;from.<br>
&nbsp;<br>
Return:&nbsp;bool;&nbsp;True&nbsp;if&nbsp;propositional&nbsp;attitude&nbsp;marker&nbsp;found,&nbsp;else&nbsp;False.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-is_definite"><strong>is_definite</strong></a>(self, doc, i)</dt><dd><tt>Check&nbsp;if&nbsp;the&nbsp;token&nbsp;at&nbsp;a&nbsp;specified&nbsp;position&nbsp;governs&nbsp;a&nbsp;definite&nbsp;or&nbsp;<br>
possessive&nbsp;determiner.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;doc:&nbsp;spaCy&nbsp;Doc;&nbsp;the&nbsp;current&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a>.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;i:&nbsp;int;&nbsp;the&nbsp;token&nbsp;index&nbsp;in&nbsp;the&nbsp;current&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a>&nbsp;to&nbsp;check.<br>
&nbsp;<br>
Return:&nbsp;bool;&nbsp;True&nbsp;if&nbsp;definite&nbsp;or&nbsp;possessive&nbsp;determiner&nbsp;found,&nbsp;else&nbsp;False.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-is_reported_speech"><strong>is_reported_speech</strong></a>(self, curr_token)</dt><dd><tt>Check&nbsp;if&nbsp;the&nbsp;current&nbsp;token's&nbsp;governor&nbsp;is&nbsp;a&nbsp;reported&nbsp;speech&nbsp;verb.<br>
NOTE:&nbsp;not&nbsp;in&nbsp;use.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;curr_token:&nbsp;spacy&nbsp;Token;&nbsp;the&nbsp;current&nbsp;token.<br>
&nbsp;<br>
Return:&nbsp;bool;&nbsp;True&nbsp;if&nbsp;reported&nbsp;speech&nbsp;verb&nbsp;found,&nbsp;else&nbsp;False.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-is_section_header"><strong>is_section_header</strong></a>(self, doc, i, verbose=True)</dt><dd><tt>Check&nbsp;if&nbsp;a&nbsp;given&nbsp;position&nbsp;in&nbsp;the&nbsp;document&nbsp;is&nbsp;part&nbsp;of&nbsp;a&nbsp;section&nbsp;header.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;doc:&nbsp;spaCy&nbsp;Doc;&nbsp;the&nbsp;current&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a>.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;i:&nbsp;int;&nbsp;the&nbsp;token&nbsp;index&nbsp;in&nbsp;the&nbsp;current&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a>&nbsp;to&nbsp;search&nbsp;from.<br>
&nbsp;<br>
Return:&nbsp;bool;&nbsp;True&nbsp;if&nbsp;section&nbsp;header,&nbsp;else&nbsp;False.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-is_singleton"><strong>is_singleton</strong></a>(self, doc, i)</dt><dd><tt>Check&nbsp;if&nbsp;the&nbsp;token&nbsp;at&nbsp;a&nbsp;specified&nbsp;index&nbsp;is&nbsp;the&nbsp;only&nbsp;one&nbsp;in&nbsp;the&nbsp;sentence.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;doc:&nbsp;spaCy&nbsp;Doc;&nbsp;the&nbsp;current&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a>.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;i:&nbsp;int;&nbsp;the&nbsp;token&nbsp;index&nbsp;in&nbsp;the&nbsp;current&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a>&nbsp;to&nbsp;check.<br>
&nbsp;<br>
Return:&nbsp;bool;&nbsp;True&nbsp;if&nbsp;section&nbsp;header,&nbsp;else&nbsp;False.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-load_date_annotator"><strong>load_date_annotator</strong></a>(self)</dt><dd><tt>Load&nbsp;a&nbsp;pipeline&nbsp;component&nbsp;to&nbsp;match&nbsp;and&nbsp;annotate&nbsp;certain&nbsp;date&nbsp;<br>
expressions.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-load_detokenizer"><strong>load_detokenizer</strong></a>(self, path)</dt><dd><tt>Load&nbsp;a&nbsp;pipeline&nbsp;component&nbsp;that&nbsp;stores&nbsp;detokenization&nbsp;rules&nbsp;loaded&nbsp;from&nbsp;<br>
a&nbsp;file.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;path:&nbsp;str;&nbsp;the&nbsp;path&nbsp;to&nbsp;the&nbsp;file&nbsp;containing&nbsp;detokenization&nbsp;rules.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-load_lexicon"><strong>load_lexicon</strong></a>(self, path, source_attribute, target_attribute, merge=False)</dt><dd><tt>Load&nbsp;a&nbsp;lexicon/terminology&nbsp;file&nbsp;for&nbsp;annotation.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;path:&nbsp;str;&nbsp;the&nbsp;path&nbsp;to&nbsp;the&nbsp;lexicon&nbsp;file.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;source_attribute:&nbsp;spaCy&nbsp;symbol;&nbsp;the&nbsp;token&nbsp;attribute&nbsp;to&nbsp;match<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;(e.g.&nbsp;LEMMA).<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;target_attribute:&nbsp;spaCy&nbsp;symbol;&nbsp;the&nbsp;token&nbsp;attribute&nbsp;to&nbsp;add&nbsp;the&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lexical&nbsp;annotations&nbsp;to&nbsp;(e.g.&nbsp;TAG,&nbsp;or&nbsp;custom&nbsp;attribute&nbsp;LA,&nbsp;SH).<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;merge:&nbsp;bool;&nbsp;merge&nbsp;annotated&nbsp;spans&nbsp;into&nbsp;a&nbsp;single&nbsp;span.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-load_pronoun_lemma_corrector"><strong>load_pronoun_lemma_corrector</strong></a>(self)</dt><dd><tt>Load&nbsp;a&nbsp;pipeline&nbsp;component&nbsp;to&nbsp;convert&nbsp;spaCy&nbsp;pronoun&nbsp;lemma&nbsp;(-PRON-)&nbsp;into<br>
the&nbsp;corresponding&nbsp;word&nbsp;form,<br>
e.g.&nbsp;ORTH=her&nbsp;LEMMA=-PRON-&nbsp;-&gt;&nbsp;ORTH=her,&nbsp;LEMMA=her.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-load_token_sequence_annotator"><strong>load_token_sequence_annotator</strong></a>(self, name)</dt><dd><tt>Load&nbsp;a&nbsp;token&nbsp;sequence&nbsp;annotator&nbsp;pipeline&nbsp;component.<br>
TODO&nbsp;allow&nbsp;for&nbsp;multiple&nbsp;annotators,&nbsp;cf.&nbsp;lemma&nbsp;and&nbsp;lexical&nbsp;annotators.<br>
TODO&nbsp;add&nbsp;path&nbsp;argument&nbsp;to&nbsp;specify&nbsp;rule&nbsp;file.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;name:&nbsp;str;&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;token&nbsp;sequence&nbsp;annotator&nbsp;-&nbsp;this&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*must*&nbsp;be&nbsp;the&nbsp;name&nbsp;(without&nbsp;the&nbsp;.py&nbsp;extension)&nbsp;of&nbsp;the&nbsp;file<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;containing&nbsp;the&nbsp;token&nbsp;sequence&nbsp;rules.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-merge_spans"><strong>merge_spans</strong></a>(self, doc)</dt><dd><tt>Merge&nbsp;all&nbsp;longest&nbsp;matching&nbsp;SH&nbsp;token&nbsp;sequences&nbsp;into&nbsp;single&nbsp;spans.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;doc:&nbsp;spaCy&nbsp;Doc;&nbsp;the&nbsp;current&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a>.<br>
&nbsp;<br>
Return:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;doc:&nbsp;spaCy&nbsp;Doc;&nbsp;the&nbsp;current&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a>&nbsp;with&nbsp;merged&nbsp;longest&nbsp;spans.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-normalise"><strong>normalise</strong></a>(self, text)</dt><dd><tt>Normalise&nbsp;the&nbsp;text.<br>
#&nbsp;TODO:&nbsp;Add&nbsp;normalisation&nbsp;rules&nbsp;if&nbsp;we&nbsp;want&nbsp;to&nbsp;clean&nbsp;things&nbsp;up&nbsp;first.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;text:&nbsp;str;&nbsp;the&nbsp;text&nbsp;to&nbsp;be&nbsp;normalised.<br>
&nbsp;<br>
Return:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;text:&nbsp;str;&nbsp;the&nbsp;normalised&nbsp;text.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-print_spans"><strong>print_spans</strong></a>(self, doc)</dt><dd><tt>Output&nbsp;all&nbsp;spans&nbsp;in&nbsp;CoNLL-style&nbsp;token&nbsp;annotations&nbsp;to&nbsp;stdout<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;doc:&nbsp;spaCy&nbsp;Doc;&nbsp;the&nbsp;current&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a></tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-print_tokens"><strong>print_tokens</strong></a>(self, doc, path)</dt><dd><tt>Output&nbsp;all&nbsp;tokens&nbsp;in&nbsp;CoNLL-style&nbsp;token&nbsp;annotations&nbsp;to&nbsp;stdout&nbsp;and&nbsp;write&nbsp;<br>
to&nbsp;file.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;doc:&nbsp;spaCy&nbsp;Doc;&nbsp;the&nbsp;current&nbsp;Doc&nbsp;<a href="builtins.html#object">object</a>.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;path:&nbsp;str;&nbsp;the&nbsp;file&nbsp;path&nbsp;to&nbsp;write&nbsp;output&nbsp;to&nbsp;(will&nbsp;overwrite&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;any&nbsp;existing&nbsp;file).</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-process"><strong>process</strong></a>(self, path, write_output=True)</dt><dd><tt>Process&nbsp;a&nbsp;single&nbsp;document&nbsp;or&nbsp;directory&nbsp;structure.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;path:&nbsp;str;&nbsp;indicates&nbsp;text&nbsp;file&nbsp;or&nbsp;directory&nbsp;to&nbsp;process.&nbsp;If&nbsp;a&nbsp;directory,&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;must&nbsp;be&nbsp;that&nbsp;used&nbsp;by&nbsp;the&nbsp;eHOST&nbsp;annotation&nbsp;tool.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;write_output:&nbsp;bool;&nbsp;save&nbsp;the&nbsp;annotated&nbsp;output&nbsp;to&nbsp;file.<br>
&nbsp;<br>
Return:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;global_mentions:&nbsp;dict;&nbsp;a&nbsp;dictionary&nbsp;containing&nbsp;all&nbsp;annotated&nbsp;mentions.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-process_text"><strong>process_text</strong></a>(self, text, text_id, write_output=False, verbose=False)</dt><dd><tt>Process&nbsp;a&nbsp;text&nbsp;string.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;text:&nbsp;str;&nbsp;the&nbsp;input&nbsp;text.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;text_id:&nbsp;str;&nbsp;a&nbsp;user-defined&nbsp;identifier&nbsp;for&nbsp;the&nbsp;text.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;write_output:&nbsp;bool;&nbsp;write&nbsp;output&nbsp;to&nbsp;file.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;verbose:&nbsp;bool;&nbsp;print&nbsp;all&nbsp;messages.<br>
&nbsp;<br>
Return:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;global_mentions:&nbsp;dict;&nbsp;a&nbsp;dictionary&nbsp;containing&nbsp;all&nbsp;annotated&nbsp;mentions.</tt></dd></dl>

<dl><dt><a name="SelfHarmAnnotator-write_ehost_output"><strong>write_ehost_output</strong></a>(self, pin, annotations, verbose=False)</dt><dd><tt>Write&nbsp;an&nbsp;annotated&nbsp;eHOST&nbsp;XML&nbsp;file&nbsp;to&nbsp;disk.<br>
&nbsp;<br>
Arguments:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;pin:&nbsp;str;&nbsp;the&nbsp;input&nbsp;file&nbsp;path&nbsp;(must&nbsp;be&nbsp;in&nbsp;eHOST&nbsp;directory&nbsp;structure).<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;annotations:&nbsp;dict;&nbsp;the&nbsp;dictionary&nbsp;of&nbsp;detected&nbsp;annotations.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;verbose:&nbsp;bool;&nbsp;print&nbsp;all&nbsp;messages.<br>
&nbsp;<br>
Return:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;root:&nbsp;Element;&nbsp;the&nbsp;root&nbsp;node&nbsp;of&nbsp;the&nbsp;new&nbsp;XML&nbsp;ElementTree&nbsp;<a href="builtins.html#object">object</a>.</tt></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>BWD_OFFSET</strong> = 10<br>
<strong>FWD_OFFSET</strong> = 10<br>
<strong>LEMMA</strong> = 73<br>
<strong>LOWER</strong> = 66<br>
<strong>text</strong> = ['', 'Has no history of taking overdoses', 'risk of self-harm', 'She is taking multiple overdoses in the past', 'She took overdoses a long time ago', 'family history of self-harm', 'She wanted to hit herself', 'She did not self-harm', 'cuts could be due to self-harm', 'has a high risk of cutting herself', 'she took an overdose in 1996', 'chronic thoughts of self-harm', 'her father has chronic self-harm', 'she had cut herself', 'she did self-imolation in the past', 'no acts of self-harm', 'she did not harm herself', 'has a history of self-abuse', 'has a history of taking multiple overdoses in the past', 'She does not report having had actual self-harm', ...]</td></tr></table>
</body></html>